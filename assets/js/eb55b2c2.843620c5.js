(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{130:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return o})),t.d(n,"toc",(function(){return d})),t.d(n,"default",(function(){return s}));var a=t(3),i=t(7),r=(t(0),t(152)),l={id:"MediaPlugins",title:"Media Plugins Upload",sidebar_label:"Media Plugins"},o={unversionedId:"plugins_api/MediaPlugins",id:"plugins_api/MediaPlugins",isDocsHomePage:!1,title:"Media Plugins Upload",description:"In this section we'll further drill into media upload and error handling in Ricos.",source:"@site/docs/plugins_api/MediaPlugins.mdx",sourceDirName:"plugins_api",slug:"/plugins_api/MediaPlugins",permalink:"/docs/plugins_api/MediaPlugins",editUrl:"https://github.com/wix/ricos/edit/master/website/docs/plugins_api/MediaPlugins.mdx",version:"current",sidebar_label:"Media Plugins",frontMatter:{id:"MediaPlugins",title:"Media Plugins Upload",sidebar_label:"Media Plugins"},sidebar:"api",previous:{title:"File Upload Plugin",permalink:"/docs/plugins_api/FileUploadPlugin"},next:{title:"Emoji Plugin",permalink:"/docs/plugins_api/EmojiPlugin"}},d=[{value:"Upload Functions API",id:"upload-functions-api",children:[]},{value:"Media Plugins <code>data</code> schemes",id:"media-plugins-data-schemes",children:[{value:"Image and Gallery",id:"image-and-gallery",children:[]},{value:"Video",id:"video",children:[]},{value:"File Upload",id:"file-upload",children:[]}]},{value:"Errors",id:"errors",children:[]}],p={toc:d};function s(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,t,{components:n,mdxType:"MDXLayout"}),Object(r.b)("p",null,"In this section we'll further drill into media upload and error handling in Ricos."),Object(r.b)("h2",{id:"upload-functions-api"},"Upload Functions API"),Object(r.b)("p",null,"This functions should be passed to the media plugins via config \\ helpers (i.e image, gallery, video and file upload)."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"handleFileUpload: (files: File[], updateEntity: UpdateEntityFunction) => void\nhandleFileSelection: (updateEntity: UpdateEntityFunction) => void\n")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"handleFileUpload")," is a function provided to handle media uploads from the native file input. ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"handleFileSelection")," is a function provided to handle media uploads from a custom file input."),Object(r.b)("p",null,"In both functions when the upload phase is done the ",Object(r.b)("inlineCode",{parentName:"p"},"updateEntity")," callback should be called with an object containing the data, error (upon faliure) and index (for multiple file uploads)."),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"UpdateEntityFunction<T>: ({ data: T, error: MediaUploadError, index: number }) => void\n")),Object(r.b)("h2",{id:"media-plugins-data-schemes"},"Media Plugins ",Object(r.b)("inlineCode",{parentName:"h2"},"data")," schemes"),Object(r.b)("h3",{id:"image-and-gallery"},"Image and Gallery"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"data?: {\n  id: string,\n  original_file_name: string,\n  file_name: string,\n  width: number,\n  height: number,\n}\n")),Object(r.b)("h3",{id:"video"},"Video"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"data?: {\n  pathname: string,\n  thumbnail: {\n    pathname: string,\n    height: number,\n    width: number,\n  },\n}\n")),Object(r.b)("h3",{id:"file-upload"},"File Upload"),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"data?: {\n  name: string;\n  type: string;\n  url?: string;\n  id?: string;\n}\n")),Object(r.b)("h2",{id:"errors"},"Errors"),Object(r.b)("p",null,"In order to take advantage of Ricos stunning error toasts and general error handling a proper ",Object(r.b)("inlineCode",{parentName:"p"},"error")," object of type ",Object(r.b)("inlineCode",{parentName:"p"},"MediaUploadError")," should be passed. ",Object(r.b)("br",null),"\nPassing an error object triggers a toast indicating what caused the upload to fail as well as an indication of the error on the block. ",Object(r.b)("br",null),"\nUsing the ",Object(r.b)("inlineCode",{parentName:"p"},"getContent")," method of RicosEditor would also remove all blocks with errors from the content, thus they won't be seen on Viewer nor saved. ",Object(r.b)("br",null)),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"MediaUploadError?: {\n  msg?: string | JSX.Element;\n  key?: MediaUploadErrorKey;\n  args?: Record<string, string | number>;\n}\n")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"msg")," is a simple string or JSX Element to use for custom error messages to be displayed. ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"key")," is an enum with our built in supported and localized error types. ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"args")," are arguments needed for the built in toasts. ",Object(r.b)("br",null)),Object(r.b)("pre",null,Object(r.b)("code",{parentName:"pre",className:"language-jsx"},"enum MediaUploadErrorKey {\n  GENERIC,\n  SIZE_LIMIT,\n  QUOTA_STORAGE_VISITOR,\n  QUOTA_STORAGE_OWNER,\n  QUOTA_VIDEO_VISITOR,\n  QUOTA_VIDEO_OWNER,\n}\n")),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"GENERIC")," a general error with no specific reason ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"SIZE_LIMIT")," the file is too big to upload, supports an argument ",Object(r.b)("inlineCode",{parentName:"p"},"maxLimit")," for maximum file size indication. ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"QUOTA_STORAGE_VISITOR")," file storage exceeded the limit (UoU). ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"QUOTA_STORAGE_OWNER")," file storage exceeded the limit (User), supports an argument ",Object(r.b)("inlineCode",{parentName:"p"},"upgradeUrl")," to upgrade the site's plan. ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"QUOTA_VIDEO_VISITOR")," video hours on the site have reached the maximum (UoU). ",Object(r.b)("br",null),"\n",Object(r.b)("inlineCode",{parentName:"p"},"QUOTA_VIDEO_OWNER")," video hours on the site have reached the maximum (User), supports an argument ",Object(r.b)("inlineCode",{parentName:"p"},"upgradeUrl")," to upgrade the site's plan. ",Object(r.b)("br",null)))}s.isMDXComponent=!0},152:function(e,n,t){"use strict";t.d(n,"a",(function(){return c})),t.d(n,"b",(function(){return m}));var a=t(0),i=t.n(a);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function d(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=i.a.createContext({}),s=function(e){var n=i.a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},c=function(e){var n=s(e.components);return i.a.createElement(p.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},b=i.a.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),c=s(t),b=a,m=c["".concat(l,".").concat(b)]||c[b]||u[b]||r;return t?i.a.createElement(m,o(o({ref:n},p),{},{components:t})):i.a.createElement(m,o({ref:n},p))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,l=new Array(r);l[0]=b;var o={};for(var d in n)hasOwnProperty.call(n,d)&&(o[d]=n[d]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var p=2;p<r;p++)l[p]=t[p];return i.a.createElement.apply(null,l)}return i.a.createElement.apply(null,t)}b.displayName="MDXCreateElement"}}]);