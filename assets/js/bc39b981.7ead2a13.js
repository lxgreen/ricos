(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{123:function(e,t,i){"use strict";i.r(t),i.d(t,"frontMatter",(function(){return a})),i.d(t,"metadata",(function(){return c})),i.d(t,"toc",(function(){return d})),i.d(t,"default",(function(){return b}));var n=i(3),o=i(7),r=(i(0),i(165)),a={id:"plugin_dod",title:"Plugin Definition of Done",sidebar_label:"Plugin DoD"},c={unversionedId:"dev/plugin_dod",id:"dev/plugin_dod",isDocsHomePage:!1,title:"Plugin Definition of Done",description:"Motivation",source:"@site/docs/dev/plugin_dod.md",slug:"/dev/plugin_dod",permalink:"/docs/dev/plugin_dod",editUrl:"https://github.com/wix/ricos/edit/master/website/docs/dev/plugin_dod.md",version:"current",sidebar_label:"Plugin DoD",sidebar:"dev",previous:{title:"Plugin Structure",permalink:"/docs/dev/plugin_structure"},next:{title:"Plugin Theming",permalink:"/docs/dev/theming"}},d=[{value:"Motivation",id:"motivation",children:[]},{value:"Plugin DoD",id:"plugin-dod",children:[{value:"1. Product and UX/UI",id:"1-product-and-uxui",children:[]},{value:"2. Data Structure and Platformization",id:"2-data-structure-and-platformization",children:[]},{value:"3. Plugin Components",id:"3-plugin-components",children:[]},{value:"4. @wix/ricos Integration",id:"4-wixricos-integration",children:[]},{value:"5. Tests",id:"5-tests",children:[]},{value:"6. Documentation",id:"6-documentation",children:[]},{value:"7. Releasing",id:"7-releasing",children:[]}]}],s={toc:d};function b(e){var t=e.components,i=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},s,i,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"motivation"},"Motivation"),Object(r.b)("p",null,"The goal of this doc is to explain the full plugin development cycle, and provide an exhaustive checklist of what should be done to bring a plugin to production-ready state."),Object(r.b)("h2",{id:"plugin-dod"},"Plugin DoD"),Object(r.b)("h3",{id:"1-product-and-uxui"},"1. Product and UX/UI"),Object(r.b)("h4",{id:"translation-keys"},"Translation Keys"),Object(r.b)("p",null,"No hard-coded strings should be found in plugin code. Every textual content shall be added to ",Object(r.b)("a",{parentName:"p",href:"https://github.com/wix/ricos/blob/master/packages/common/web/statics/locale/messages_en.json"},"messages_en.json")," and used as ",Object(r.b)("inlineCode",{parentName:"p"},"t('Translation_Key')"),"."),Object(r.b)("h4",{id:"reasonable-defaults"},"Reasonable Defaults"),Object(r.b)("p",null,"The plugin definition should contain the default data that is added to content upon plugin insertion. The defaults should be used by both plugin component in editor, and Builder API method."),Object(r.b)("h4",{id:"accessibility"},"Accessibility"),Object(r.b)("h5",{id:"keyboard-shortcuts"},"Keyboard Shortcuts"),Object(r.b)("h5",{id:"keyboard-navigation"},"Keyboard Navigation"),Object(r.b)("h5",{id:"aria-attributes"},"ARIA attributes"),Object(r.b)("h4",{id:"bi-events"},"BI Events"),Object(r.b)("p",null,"The plugin definition should contain relevant BI events for the plugin."),Object(r.b)("h4",{id:"error-handling"},"Error Handling"),Object(r.b)("h5",{id:"resilience"},"Resilience"),Object(r.b)("p",null,"The plugin definition should describe the plugin behavior in case of failure, e.g. content clean up if the file upload fails."),Object(r.b)("h5",{id:"error-messages"},"Error Messages"),Object(r.b)("h6",{id:"reasonable-messages"},"Reasonable Messages"),Object(r.b)("p",null,"The error messages should be clear and specific as much as possible."),Object(r.b)("h6",{id:"error-logging"},"Error Logging"),Object(r.b)("h6",{id:"error-ui-toasts-etc"},"Error UI (Toasts, etc)"),Object(r.b)("h4",{id:"security-concerns"},"Security Concerns"),Object(r.b)("h5",{id:"3rd-party-api-keys-and-secrets"},"3rd Party API Keys and Secrets"),Object(r.b)("p",null,"Some plugins rely on 3rd party services that require authentication (usually, with an API key like Google Maps Service). Such key should not be exposed on client side."),Object(r.b)("h5",{id:"script-injection-html-user-input"},"Script Injection (HTML user input)"),Object(r.b)("h5",{id:"service-abuse-dos"},"Service Abuse (DoS)"),Object(r.b)("p",null,"Service requests should be throttled and limited."),Object(r.b)("h4",{id:"customization"},"Customization"),Object(r.b)("h5",{id:"plugin-configuration-editorviewer"},"Plugin Configuration (Editor/Viewer)"),Object(r.b)("h5",{id:"theming-options"},"Theming Options"),Object(r.b)("h6",{id:"theme-api-extension"},"Theme API Extension"),Object(r.b)("h6",{id:"theme-wiring"},"Theme Wiring"),Object(r.b)("h3",{id:"2-data-structure-and-platformization"},"2. Data Structure and Platformization"),Object(r.b)("h4",{id:"plugin-schema"},"Plugin Schema"),Object(r.b)("h5",{id:"elaboration"},"Elaboration"),Object(r.b)("p",null,"Upon new plugin addition, the protobuf schema should be extended without breaking changes. This means, new messages can be added and used in existing messages, while the field indices are not changed/reused (new field should get new unique index)."),Object(r.b)("h5",{id:"review"},"Review"),Object(r.b)("h4",{id:"content-api"},"Content API"),Object(r.b)("h5",{id:"content-builder"},"Content Builder"),Object(r.b)("h5",{id:"translatable-api"},"Translatable API"),Object(r.b)("h4",{id:"velo-api"},"Velo API"),Object(r.b)("h5",{id:"velo-builder-methods"},"Velo Builder Methods"),Object(r.b)("h5",{id:"velo-package-update"},"Velo Package Update"),Object(r.b)("h4",{id:"converters"},"Converters"),Object(r.b)("h5",{id:"fromdraft--todraft"},"fromDraft / toDraft"),Object(r.b)("h5",{id:"fromhtml--tohtml"},"fromHtml / toHtml"),Object(r.b)("h5",{id:"fromplaintext--toplaintext"},"fromPlainText / toPlainText"),Object(r.b)("h5",{id:"fromtiptap--totiptap"},"fromTiptap / toTiptap"),Object(r.b)("h3",{id:"3-plugin-components"},"3. Plugin Components"),Object(r.b)("h4",{id:"performant-design-practices"},"Performant Design Practices"),Object(r.b)("h5",{id:"lazy-loading"},"Lazy Loading"),Object(r.b)("h5",{id:"dynamic-imports--loadable"},"Dynamic Imports & Loadable"),Object(r.b)("h4",{id:"ssr-and-seo"},"SSR and SEO"),Object(r.b)("h4",{id:"asynchronous-behavior"},"Asynchronous Behavior"),Object(r.b)("h4",{id:"static-assets"},"Static Assets"),Object(r.b)("h5",{id:"svg"},"SVG"),Object(r.b)("p",null,"In some cases, SVG files provided by UI designers contain conflicting ids which lead to wrong icons being displayed. Also, sometimes SVG files contain redundant data which may be removed without any effect."),Object(r.b)("h4",{id:"3rd-party-dependencies"},"3rd Party Dependencies"),Object(r.b)("h5",{id:"pinned-vs-latest-version"},"Pinned vs Latest Version"),Object(r.b)("h5",{id:"es5-compliance"},"ES5 Compliance"),Object(r.b)("h5",{id:"polyfills"},"Polyfills"),Object(r.b)("h4",{id:"build-script-options"},"Build Script Options"),Object(r.b)("h4",{id:"editorviewer-components"},"Editor/Viewer Components"),Object(r.b)("h5",{id:"module-structure"},"Module Structure"),Object(r.b)("h5",{id:"tiptap-extensions"},"Tiptap Extensions"),Object(r.b)("h4",{id:"toolbars-and-settings"},"Toolbars and Settings"),Object(r.b)("h3",{id:"4-wixricos-integration"},"4. @wix/ricos Integration"),Object(r.b)("h4",{id:"services"},"Services"),Object(r.b)("h4",{id:"test-in-ricos-tpa"},"Test in ricos-tpa"),Object(r.b)("h3",{id:"5-tests"},"5. Tests"),Object(r.b)("h4",{id:"unit-tests"},"Unit Tests"),Object(r.b)("h4",{id:"e2e"},"E2E"),Object(r.b)("h4",{id:"performance-measurement"},"Performance Measurement"),Object(r.b)("h5",{id:"bundle-size"},"Bundle Size"),Object(r.b)("h5",{id:"time-to-display"},"Time to Display"),Object(r.b)("h5",{id:"time-to-interactive"},"Time to Interactive"),Object(r.b)("h3",{id:"6-documentation"},"6. Documentation"),Object(r.b)("h4",{id:"docusaurus"},"Docusaurus"),Object(r.b)("h5",{id:"code-examples"},"Code Examples"),Object(r.b)("h5",{id:"deploying"},"Deploying"),Object(r.b)("h4",{id:"wixricos-pages"},"@wix/ricos Pages"),Object(r.b)("h4",{id:"storybook"},"Storybook?"),Object(r.b)("h3",{id:"7-releasing"},"7. Releasing"),Object(r.b)("h4",{id:"submitting-a-pr"},"Submitting a PR"),Object(r.b)("h4",{id:"review-1"},"Review"),Object(r.b)("h4",{id:"minor-release"},"Minor Release"),Object(r.b)("h4",{id:"wixricos-release"},"@wix/ricos Release"))}b.isMDXComponent=!0},165:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return h}));var n=i(0),o=i.n(n);function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach((function(t){r(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}var s=o.a.createContext({}),b=function(e){var t=o.a.useContext(s),i=t;return e&&(i="function"==typeof e?e(t):c(c({},t),e)),i},l=function(e){var t=b(e.components);return o.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},p=o.a.forwardRef((function(e,t){var i=e.components,n=e.mdxType,r=e.originalType,a=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),l=b(i),p=n,h=l["".concat(a,".").concat(p)]||l[p]||u[p]||r;return i?o.a.createElement(h,c(c({ref:t},s),{},{components:i})):o.a.createElement(h,c({ref:t},s))}));function h(e,t){var i=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=i.length,a=new Array(r);a[0]=p;var c={};for(var d in t)hasOwnProperty.call(t,d)&&(c[d]=t[d]);c.originalType=e,c.mdxType="string"==typeof e?e:n,a[1]=c;for(var s=2;s<r;s++)a[s]=i[s];return o.a.createElement.apply(null,a)}return o.a.createElement.apply(null,i)}p.displayName="MDXCreateElement"}}]);