import _objectWithoutPropertiesLoose from"@babel/runtime/helpers/objectWithoutPropertiesLoose";import _extends from"@babel/runtime/helpers/extends";import{isNaN as isNaN$1,omit,merge,isObject,cloneDeep,has as has$1}from"lodash";import{v4}from"uuid";var toNoCase_1=function(string){return hasSpace.test(string)?string.toLowerCase():hasSeparator.test(string)?(function(string){return string.replace(separatorSplitter,(function(m,next){return next?" "+next:""}))}(string)||string).toLowerCase():hasCamel.test(string)?function(string){return string.replace(camelSplitter,(function(m,previous,uppers){return previous+" "+uppers.toLowerCase().split("").join(" ")}))}(string).toLowerCase():string.toLowerCase()},hasSpace=/\s/,hasSeparator=/(_|-|\.|:)/,hasCamel=/([a-z][A-Z]|[A-Z][a-z])/;var separatorSplitter=/[\W_]+(.|$)/g;var camelSplitter=/(.)([A-Z]+)/g;var toSpaceCase_1=function(string){return toNoCase_1(string).replace(/[\W_]+(.|$)/g,(function(matches,match){return match?" "+match:""})).trim()};var _RICOS_NODE_TYPE_TO_D,toCamelCase_1=function(string){return toSpaceCase_1(string).replace(/\s(\w)/g,(function(matches,letter){return letter.toUpperCase()}))};Object.freeze({ONE:"header-one",TWO:"header-two",THREE:"header-three",FOUR:"header-four",FIVE:"header-five",SIX:"header-six",PARAGRAPH:"unstyled"}),Object.freeze(["header-one","header-two","header-three","header-four","header-five","header-six","unordered-list-item","ordered-list-item","blockquote","atomic","code-block","unstyled"]);var _FROM_DRAFT_LIST_TYPE,_TO_RICOS_NODE_TYPE,_TO_RICOS_DECORATION_,_ENTITY_DECORATION_TO,_DRAFT_BLOCK_TYPE_TO_,_ENTITY_DECORATION_TO2,_TO_DRAFT_PLUGIN_TYPE,_TO_RICOS_PLUGIN_TYPE,BlockType,HeaderLevel,DIVIDER_TYPE="wix-draft-plugin-divider",FILE_UPLOAD_TYPE="wix-draft-plugin-file-upload",GALLERY_TYPE="wix-draft-plugin-gallery",GIPHY_TYPE="wix-draft-plugin-giphy",HTML_TYPE="wix-draft-plugin-html",IMAGE_TYPE="wix-draft-plugin-image",TEXT_COLOR_TYPE="wix-rich-content-text-color",TEXT_HIGHLIGHT_TYPE="wix-rich-content-text-highlight",VIDEO_TYPE="wix-draft-plugin-video",POLL_TYPE="wix-draft-plugin-poll",RICOS_NODE_TYPE_TO_DATA_FIELD=((_RICOS_NODE_TYPE_TO_D={}).BUTTON="buttonData",_RICOS_NODE_TYPE_TO_D.DIVIDER="dividerData",_RICOS_NODE_TYPE_TO_D.FILE="fileData",_RICOS_NODE_TYPE_TO_D.GALLERY="galleryData",_RICOS_NODE_TYPE_TO_D.GIF="gifData",_RICOS_NODE_TYPE_TO_D.HTML="htmlData",_RICOS_NODE_TYPE_TO_D.IMAGE="imageData",_RICOS_NODE_TYPE_TO_D.COLLAPSIBLE_LIST="collapsibleListData",_RICOS_NODE_TYPE_TO_D.LINK_PREVIEW="linkPreviewData",_RICOS_NODE_TYPE_TO_D.MAP="mapData",_RICOS_NODE_TYPE_TO_D.APP_EMBED="appEmbedData",_RICOS_NODE_TYPE_TO_D.VIDEO="videoData",_RICOS_NODE_TYPE_TO_D.POLL="pollData",_RICOS_NODE_TYPE_TO_D.TABLE="tableData",_RICOS_NODE_TYPE_TO_D.TABLE_CELL="tableCellData",_RICOS_NODE_TYPE_TO_D.PARAGRAPH="paragraphData",_RICOS_NODE_TYPE_TO_D.LIST_ITEM="paragraphData",_RICOS_NODE_TYPE_TO_D.HEADING="headingData",_RICOS_NODE_TYPE_TO_D.CODE_BLOCK="codeBlockData",_RICOS_NODE_TYPE_TO_D.BLOCKQUOTE="paragraphData",_RICOS_NODE_TYPE_TO_D.EMBED="embedData",_RICOS_NODE_TYPE_TO_D.EXTERNAL="externalData",_RICOS_NODE_TYPE_TO_D);function fromEntries(iterable){return[].concat(iterable).reduce((function(obj,_ref){var key=_ref[0],val=_ref[1];return obj[key]=val,obj}),{})}!function(BlockType){BlockType.Unstyled="unstyled",BlockType.HeaderOne="header-one",BlockType.HeaderTwo="header-two",BlockType.HeaderThree="header-three",BlockType.HeaderFour="header-four",BlockType.HeaderFive="header-five",BlockType.HeaderSix="header-six",BlockType.UnorderedListItem="unordered-list-item",BlockType.OrderedListItem="ordered-list-item",BlockType.Blockquote="blockquote",BlockType.CodeBlock="code-block",BlockType.Atomic="atomic"}(BlockType||(BlockType={})),function(HeaderLevel){HeaderLevel[HeaderLevel["header-one"]=1]="header-one",HeaderLevel[HeaderLevel["header-two"]=2]="header-two",HeaderLevel[HeaderLevel["header-three"]=3]="header-three",HeaderLevel[HeaderLevel["header-four"]=4]="header-four",HeaderLevel[HeaderLevel["header-five"]=5]="header-five",HeaderLevel[HeaderLevel["header-six"]=6]="header-six"}(HeaderLevel||(HeaderLevel={}));var FROM_DRAFT_LIST_TYPE=((_FROM_DRAFT_LIST_TYPE={})[BlockType.UnorderedListItem]="BULLETED_LIST",_FROM_DRAFT_LIST_TYPE[BlockType.OrderedListItem]="ORDERED_LIST",_FROM_DRAFT_LIST_TYPE),TO_DRAFT_LIST_TYPE=fromEntries(Object.entries(FROM_DRAFT_LIST_TYPE).map((function(_ref){var key=_ref[0];return[_ref[1],key]}))),TO_RICOS_NODE_TYPE=((_TO_RICOS_NODE_TYPE={})["wix-draft-plugin-link-button"]="BUTTON",_TO_RICOS_NODE_TYPE["wix-draft-plugin-action-button"]="BUTTON",_TO_RICOS_NODE_TYPE[DIVIDER_TYPE]="DIVIDER",_TO_RICOS_NODE_TYPE[FILE_UPLOAD_TYPE]="FILE",_TO_RICOS_NODE_TYPE[GALLERY_TYPE]="GALLERY",_TO_RICOS_NODE_TYPE[GIPHY_TYPE]="GIF",_TO_RICOS_NODE_TYPE[HTML_TYPE]="HTML",_TO_RICOS_NODE_TYPE[IMAGE_TYPE]="IMAGE",_TO_RICOS_NODE_TYPE.IMAGE="IMAGE",_TO_RICOS_NODE_TYPE["wix-rich-content-plugin-collapsible-list"]="COLLAPSIBLE_LIST",_TO_RICOS_NODE_TYPE["wix-draft-plugin-link-preview"]="LINK_PREVIEW",_TO_RICOS_NODE_TYPE["wix-draft-plugin-map"]="MAP",_TO_RICOS_NODE_TYPE["wix-draft-plugin-vertical-embed"]="APP_EMBED",_TO_RICOS_NODE_TYPE[VIDEO_TYPE]="VIDEO",_TO_RICOS_NODE_TYPE["VIDEO-EMBED"]="VIDEO",_TO_RICOS_NODE_TYPE[POLL_TYPE]="POLL",_TO_RICOS_NODE_TYPE["wix-rich-content-plugin-table"]="TABLE",_TO_RICOS_NODE_TYPE.EMBED="EMBED",_TO_RICOS_NODE_TYPE.EXTERNAL="EXTERNAL",_TO_RICOS_NODE_TYPE),DUPLICATE_KEYS=["IMAGE","VIDEO-EMBED"],FROM_RICOS_ENTITY_TYPE=fromEntries(Object.entries(TO_RICOS_NODE_TYPE).filter((function(_ref2){var key=_ref2[0];return!DUPLICATE_KEYS.includes(key)})).map((function(_ref3){var key=_ref3[0];return[_ref3[1],key]}))),TO_RICOS_DECORATION_TYPE=((_TO_RICOS_DECORATION_={BOLD:"BOLD",ITALIC:"ITALIC",UNDERLINE:"UNDERLINE"})["wix-rich-content-plugin-spoiler"]="SPOILER",_TO_RICOS_DECORATION_.ANCHOR="ANCHOR",_TO_RICOS_DECORATION_.mention="MENTION",_TO_RICOS_DECORATION_.LINK="LINK",_TO_RICOS_DECORATION_.EXTERNAL="EXTERNAL",_TO_RICOS_DECORATION_);_extends({},TO_RICOS_NODE_TYPE,TO_RICOS_DECORATION_TYPE);var FROM_RICOS_DECORATION_TYPE=fromEntries(Object.entries(TO_RICOS_DECORATION_TYPE).map((function(_ref4){var key=_ref4[0];return[_ref4[1],key]}))),ENTITY_DECORATION_TO_MUTABILITY=((_ENTITY_DECORATION_TO={}).ANCHOR="MUTABLE",_ENTITY_DECORATION_TO.LINK="MUTABLE",_ENTITY_DECORATION_TO.mention="SEGMENTED",_ENTITY_DECORATION_TO.EMOJI_TYPE="IMMUTABLE",_ENTITY_DECORATION_TO),DRAFT_BLOCK_TYPE_TO_DATA_FIELD=((_DRAFT_BLOCK_TYPE_TO_={})[BlockType.Unstyled]="paragraphData",_DRAFT_BLOCK_TYPE_TO_[BlockType.UnorderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_[BlockType.OrderedListItem]="paragraphData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderOne]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderTwo]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderThree]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderFour]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderFive]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.HeaderSix]="headingData",_DRAFT_BLOCK_TYPE_TO_[BlockType.CodeBlock]="codeBlockData",_DRAFT_BLOCK_TYPE_TO_[BlockType.Blockquote]="paragraphData",_DRAFT_BLOCK_TYPE_TO_),DRAFT_PLUGIN_TYPE_TO_DATA_FIELD=fromEntries(Object.entries(TO_RICOS_NODE_TYPE).map((function(_ref5){var key=_ref5[0],value=_ref5[1];return[key,RICOS_NODE_TYPE_TO_DATA_FIELD[value]]}))),ENTITY_DECORATION_TO_DATA_FIELD=((_ENTITY_DECORATION_TO2={}).ANCHOR="anchorData",_ENTITY_DECORATION_TO2.LINK="linkData",_ENTITY_DECORATION_TO2.mention="mentionData",_ENTITY_DECORATION_TO2.EMOJI_TYPE="emojiData",_ENTITY_DECORATION_TO2),TO_RICOS_DECORATION_DATA_FIELD=_extends({},ENTITY_DECORATION_TO_DATA_FIELD,{COLOR:"colorData"}),TO_RICOS_DATA_FIELD=_extends({},TO_RICOS_DECORATION_DATA_FIELD,DRAFT_PLUGIN_TYPE_TO_DATA_FIELD,DRAFT_BLOCK_TYPE_TO_DATA_FIELD);function identity(a){return a}function flow(ab,bc,cd,de,ef,fg,gh,hi,ij){switch(arguments.length){case 1:return ab;case 2:return function(){return bc(ab.apply(this,arguments))};case 3:return function(){return cd(bc(ab.apply(this,arguments)))};case 4:return function(){return de(cd(bc(ab.apply(this,arguments))))};case 5:return function(){return ef(de(cd(bc(ab.apply(this,arguments)))))};case 6:return function(){return fg(ef(de(cd(bc(ab.apply(this,arguments))))))};case 7:return function(){return gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))};case 8:return function(){return hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments))))))))};case 9:return function(){return ij(hi(gh(fg(ef(de(cd(bc(ab.apply(this,arguments)))))))))}}}function pipe$1(a,ab,bc,cd,de,ef,fg,gh,hi,ij,jk,kl,lm,mn,no,op,pq,qr,rs,st){switch(arguments.length){case 1:return a;case 2:return ab(a);case 3:return bc(ab(a));case 4:return cd(bc(ab(a)));case 5:return de(cd(bc(ab(a))));case 6:return ef(de(cd(bc(ab(a)))));case 7:return fg(ef(de(cd(bc(ab(a))))));case 8:return gh(fg(ef(de(cd(bc(ab(a)))))));case 9:return hi(gh(fg(ef(de(cd(bc(ab(a))))))));case 10:return ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))));case 11:return jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))));case 12:return kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))));case 13:return lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))));case 14:return mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))));case 15:return no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))));case 16:return op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))));case 17:return pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))));case 18:return qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))));case 19:return rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a))))))))))))))))));case 20:return st(rs(qr(pq(op(no(mn(lm(kl(jk(ij(hi(gh(fg(ef(de(cd(bc(ab(a)))))))))))))))))))}}(_TO_DRAFT_PLUGIN_TYPE={})["ricos-divider"]=DIVIDER_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-file"]=FILE_UPLOAD_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-gallery"]=GALLERY_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-giphy"]=GIPHY_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-html"]=HTML_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-image"]=IMAGE_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-video"]=VIDEO_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-poll"]=POLL_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-link"]="LINK",_TO_DRAFT_PLUGIN_TYPE["ricos-mention"]="mention",_TO_DRAFT_PLUGIN_TYPE["ricos-text-highlight"]=TEXT_HIGHLIGHT_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-text-color"]=TEXT_COLOR_TYPE,_TO_DRAFT_PLUGIN_TYPE[DIVIDER_TYPE]=DIVIDER_TYPE,_TO_DRAFT_PLUGIN_TYPE[FILE_UPLOAD_TYPE]=FILE_UPLOAD_TYPE,_TO_DRAFT_PLUGIN_TYPE[GALLERY_TYPE]=GALLERY_TYPE,_TO_DRAFT_PLUGIN_TYPE[GIPHY_TYPE]=GIPHY_TYPE,_TO_DRAFT_PLUGIN_TYPE[HTML_TYPE]=HTML_TYPE,_TO_DRAFT_PLUGIN_TYPE[IMAGE_TYPE]=IMAGE_TYPE,_TO_DRAFT_PLUGIN_TYPE[VIDEO_TYPE]=VIDEO_TYPE,_TO_DRAFT_PLUGIN_TYPE[POLL_TYPE]=POLL_TYPE,_TO_DRAFT_PLUGIN_TYPE[TEXT_HIGHLIGHT_TYPE]=TEXT_HIGHLIGHT_TYPE,_TO_DRAFT_PLUGIN_TYPE[TEXT_COLOR_TYPE]=TEXT_COLOR_TYPE,_TO_DRAFT_PLUGIN_TYPE["ricos-indent"]="ricos-indent",_TO_DRAFT_PLUGIN_TYPE["ricos-line-spacing"]="ricos-line-spacing",_TO_DRAFT_PLUGIN_TYPE.EXTERNAL="EXTERNAL",(_TO_RICOS_PLUGIN_TYPE={})[DIVIDER_TYPE]="ricos-divider",_TO_RICOS_PLUGIN_TYPE[FILE_UPLOAD_TYPE]="ricos-file",_TO_RICOS_PLUGIN_TYPE[GALLERY_TYPE]="ricos-gallery",_TO_RICOS_PLUGIN_TYPE[GIPHY_TYPE]="ricos-giphy",_TO_RICOS_PLUGIN_TYPE[HTML_TYPE]="ricos-html",_TO_RICOS_PLUGIN_TYPE[IMAGE_TYPE]="ricos-image",_TO_RICOS_PLUGIN_TYPE[VIDEO_TYPE]="ricos-video",_TO_RICOS_PLUGIN_TYPE[POLL_TYPE]="ricos-poll",_TO_RICOS_PLUGIN_TYPE.LINK="ricos-link",_TO_RICOS_PLUGIN_TYPE.mention="ricos-mention",_TO_RICOS_PLUGIN_TYPE["wix-rich-content-plugin-collapsible-list"]="ricos-collapsible-list",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-action-button"]="ricos-action-button",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-link-button"]="ricos-link-button",_TO_RICOS_PLUGIN_TYPE["code-block"]="ricos-code-block",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-emoji"]="ricos-emoji",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-hashtag"]="ricos-hashtag",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-headers-markdown"]="ricos-headers-markdown",_TO_RICOS_PLUGIN_TYPE["wix-rich-content-plugin-indent"]="ricos-indent",_TO_RICOS_PLUGIN_TYPE["line-spacing"]="ricos-line-spacing",_TO_RICOS_PLUGIN_TYPE["wix-rich-content-plugin-table"]="ricos-table",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-external-link"]="ricos-external-link",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-link-preview"]="ricos-link-preview",_TO_RICOS_PLUGIN_TYPE["wix-rich-content-plugin-spoiler"]="ricos-spoiler",_TO_RICOS_PLUGIN_TYPE["wix-rich-content-undo-redo"]="ricos-undo-redo",_TO_RICOS_PLUGIN_TYPE["wix-rich-content-plugin-headings"]="ricos-heading-dropdown",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-map"]="ricos-map",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-sound-cloud"]="ricos-sound-cloud",_TO_RICOS_PLUGIN_TYPE[TEXT_COLOR_TYPE]="ricos-text-color",_TO_RICOS_PLUGIN_TYPE[TEXT_HIGHLIGHT_TYPE]="ricos-text-highlight",_TO_RICOS_PLUGIN_TYPE["wix-draft-plugin-vertical-embed"]="ricos-vertical-embed";var SK=function(_,b){return b},isSome=function(fa){return"Some"===fa._tag},isLeft$1=function(ma){return"Left"===ma._tag},left$1=function(e){return{_tag:"Left",left:e}},right$1=function(a){return{_tag:"Right",right:a}},has=Object.prototype.hasOwnProperty,first=function(){return{concat:identity}},concatAll$1=function(M){return function(startWith){return function(as){return as.reduce((function(a,acc){return M.concat(a,acc)}),startWith)}}},Ord={equals:function(first,second){return first===second},compare:function(first,second){return first<second?-1:first>second?1:0}},seenKeys={},MULTIPLIER=Math.pow(2,24);function generateId(){for(var key;void 0===key||seenKeys.hasOwnProperty(key)||!isNaN(Number(key));)key=Math.floor(Math.random()*MULTIPLIER).toString(32);return seenKeys[key]=!0,key}var _ricosDecorationToCss,parseLink=function(_ref5){var url=_ref5.url,rel=_ref5.rel,target=_ref5.target,anchor=_ref5.anchor,customData=_ref5.customData;return{anchor:anchor,url:url,rel:rel&&Object.entries(rel).flatMap((function(_ref6){var key=_ref6[0];return _ref6[1]?key:[]})).join(" "),target:target&&"_"+target.toLowerCase(),customData:customData}},toVersion=function(versionString){return versionString.split(".").map((function(literal){var numeric=parseInt(literal,10);return isNaN$1(numeric)?0:numeric})).slice(0,3)},compareVersions=function(left,right){var leftVersion=toVersion(left),rightVersion=toVersion(right);return leftVersion.map((function(left,idx){return Math.sign(left-rightVersion[idx])})).find((function(num){return 0!==num}))||0},evaluations={"<":function(left,right){return compareVersions(left,right)<0},">":function(left,right){return compareVersions(left,right)>0},"=":function(left,right){return 0===compareVersions(left,right)},"<=":function(left,right){return compareVersions(left,right)<=0},">=":function(left,right){return compareVersions(left,right)>=0}},Version={lessThan:function(left,right){return compareVersions(left,right)<0},greaterThan:function(left,right){return compareVersions(left,right)>0},equal:function(left,right){return 0===compareVersions(left,right)},compare:compareVersions,currentVersion:"8.63.7",evaluate:function(tested,semver){var _$exec=/([<>=]{0,2})(.*)/gm.exec(semver),operator=_$exec[1],version=_$exec[2];return evaluations[operator||"="](tested,version)}},createAtomicEntityData=function(node,entityKey){var _getNodeEntityData=function(node){var _node$buttonData,type=node.type,draftPluginType=FROM_RICOS_ENTITY_TYPE[type];"BUTTON"===type?draftPluginType="ACTION"===(null===(_node$buttonData=node.buttonData)||void 0===_node$buttonData?void 0:_node$buttonData.type)?"wix-draft-plugin-action-button":"wix-draft-plugin-link-button":"EMBED"===type&&(draftPluginType="wix-draft-plugin-link-preview");var data=convertNodeToDraftData(node);if(void 0===data)throw Error('ERROR! Unknown entity type "'+type+'"!');return{type:draftPluginType,data:data}}(node),type=_getNodeEntityData.type,data=_getNodeEntityData.data;return createEntity(entityKey,{type:type,mutability:"IMMUTABLE",data:data})},createTextBlockData=function(node){var indentation=(node[RICOS_NODE_TYPE_TO_DATA_FIELD[node.type]]||{}).indentation,_getDynamicStyles=function(node){var _ref2=(node[RICOS_NODE_TYPE_TO_DATA_FIELD[node.type]]||{}).textStyle||{},textAlignment=_ref2.textAlignment,lineHeight=_ref2.lineHeight,_ref3=node.style||{};return{textAlignment:textAlignment,lineHeight:lineHeight,paddingTop:_ref3.paddingTop,paddingBottom:_ref3.paddingBottom}}(node),textAlignment=_getDynamicStyles.textAlignment,lineHeight=_getDynamicStyles.lineHeight,paddingTop=_getDynamicStyles.paddingTop,paddingBottom=_getDynamicStyles.paddingBottom;return JSON.parse(JSON.stringify({textAlignment:"AUTO"!==textAlignment?null==textAlignment?void 0:textAlignment.toLowerCase():void 0,dynamicStyles:(paddingTop||paddingBottom||lineHeight)&&{"padding-top":paddingTop,"padding-bottom":paddingBottom,"line-height":lineHeight},depth:indentation}))},createEntity=function(key,_ref5){var _ref6,type=_ref5.type,mutability=_ref5.mutability,data=_ref5.data;return(_ref6={})[key.toString()]={type:type,mutability:mutability,data:data},_ref6},emojiRegex=/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC68(?:\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFE])|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83D\uDC69\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69])(?:\uD83C[\uDFFC-\uDFFF])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83C\uDFF3\uFE0F\u200D\u26A7|\uD83E\uDDD1(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|\uD83D\uDC3B\u200D\u2744|(?:(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\uD83C\uDFF4\u200D\u2620|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])\u200D[\u2640\u2642]|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u2600-\u2604\u260E\u2611\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26B0\u26B1\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0\u26F1\u26F4\u26F7\u26F8\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2763\u2764\u27A1\u2934\u2935\u2B05-\u2B07\u3030\u303D\u3297\u3299]|\uD83C[\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]|\uD83D[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3])\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69(?:\uD83C\uDFFF|\uD83C\uDFFE|\uD83C\uDFFD|\uD83C\uDFFC|\uD83C\uDFFB)?|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83D\uDC08\u200D\u2B1B|\uD83D\uDC41\uFE0F|\uD83C\uDFF3\uFE0F|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])?|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|[#*0-9]\uFE0F\u20E3|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|\uD83C\uDFF4|(?:[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270C\u270D]|\uD83D[\uDD74\uDD90])(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])|[\u270A\u270B]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC08\uDC15\uDC3B\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0C\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5]|\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD]|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF]|[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB]|\uD83E[\uDD0D\uDD0E\uDD10-\uDD17\uDD1D\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78\uDD7A-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCB\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7A\uDE80-\uDE86\uDE90-\uDEA8\uDEB0-\uDEB6\uDEC0-\uDEC2\uDED0-\uDED6]/g,_excluded$2=["colorData"],_excluded2$1=["fontSizeData"],_excluded3$1=["fontWeightValue"],_excluded4$1=["italicData"],_excluded5$1=["underlineData"],isInlineStyleDecoration=function(decorationType){return void 0===TO_RICOS_DECORATION_DATA_FIELD[decorationType]},parseEntityDecorations=function(decorations,latestEntityKey){var _decorations$reduce=decorations.reduce((function(_ref4,decoration){var entityRanges=_ref4.entityRanges,entityMap=_ref4.entityMap,newEntityKey=_ref4.latestEntityKey+1,newEntityMap=function(decoration,entityKey){var type=decoration.type,data=decoration.emojiData||convertDecorationToDraftData(_extends({},decoration,{type:TO_RICOS_DECORATION_TYPE[type]}));if(void 0===data)throw Error('ERROR! Unknown entity type "'+type+'"!');var mutability=ENTITY_DECORATION_TO_MUTABILITY[type];return createEntity(entityKey,{type:type,mutability:mutability,data:data})}(decoration,newEntityKey);return{entityRanges:[].concat(entityRanges,[{key:newEntityKey,offset:decoration.start,length:decoration.end-decoration.start}]),entityMap:_extends({},entityMap,newEntityMap),latestEntityKey:newEntityKey}}),{entityRanges:[],entityMap:{},latestEntityKey:latestEntityKey});return{entityRanges:_decorations$reduce.entityRanges,entityMap:_decorations$reduce.entityMap,latestEntityKey:_decorations$reduce.latestEntityKey}},convertDecorationTypes=function(decorations){return decorations.flatMap((function(decoration){return function(arg){for(var _len=arguments.length,fns=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)fns[_key-1]=arguments[_key];return fns.reduce((function(v,fn){return fn(v)}),arg)}(decoration,toDraftDecorationType,convertFontSize,convertFontWeight,convertItalic,convertUnderline,splitColorDecoration)}))},ricosDecorationToCss=((_ricosDecorationToCss={}).BOLD=function(_ref5){var fontWeightValue=_ref5.fontWeightValue;return{"font-weight":!fontWeightValue||fontWeightValue>=700?"bold":"normal"}},_ricosDecorationToCss.ITALIC=function(_ref6){var italicData=_ref6.italicData;return{"font-style":italicData||void 0===italicData?"italic":"normal"}},_ricosDecorationToCss.UNDERLINE=function(_ref7){var underlineData=_ref7.underlineData;return{"text-decoration":underlineData||void 0===underlineData?"underline":"none"}},_ricosDecorationToCss.FONT_SIZE=function(_ref8){var fontSizeData=_ref8.fontSizeData;return{"font-size":fontSizeData.value+(fontSizeData.unit||"px")}},_ricosDecorationToCss.COLOR=function(_ref9){var colorData=_ref9.colorData,foreground=colorData.foreground,background=colorData.background,colors={};return foreground&&(colors.color=foreground),background&&(colors["background-color"]=background),colors},_ricosDecorationToCss),createEmojiDecorations=function(text){for(var match,result=[];null!==(match=emojiRegex.exec(text));){var _match=match,emojiUnicode=_match[0],start=_match.index,decoration={type:"EMOJI_TYPE",emojiData:{emojiUnicode:emojiUnicode},start:start,end:start+Array.from(emojiUnicode).length};result.push(decoration)}return result},toDraftDecorationType=function(decoration){var type=omit(FROM_RICOS_DECORATION_TYPE,["BOLD","ITALIC","UNDERLINE"])[decoration.type];return type?_extends({},decoration,{type:type}):decoration},splitColorDecoration=function(_ref10){var colorData=_ref10.colorData,decoration=_objectWithoutPropertiesLoose(_ref10,_excluded$2);if(!colorData)return decoration;var foreground=colorData.foreground,background=colorData.background;return[foreground&&{FG:foreground},background&&{BG:background}].filter((function(x){return x})).map((function(type){return _extends({},decoration,{type:JSON.stringify(type)})}))},convertFontSize=function(_ref11){var _fontSizeData$value,_fontSizeData$unit,fontSizeData=_ref11.fontSizeData,decoration=_objectWithoutPropertiesLoose(_ref11,_excluded2$1);return fontSizeData?_extends({},decoration,{type:JSON.stringify({"font-size":(null===(_fontSizeData$value=fontSizeData.value)||void 0===_fontSizeData$value?void 0:_fontSizeData$value.toString())+((null===(_fontSizeData$unit=fontSizeData.unit)||void 0===_fontSizeData$unit?void 0:_fontSizeData$unit.toLowerCase())||"px")})}):decoration},convertFontWeight=function(_ref12){var fontWeightValue=_ref12.fontWeightValue,decoration=_objectWithoutPropertiesLoose(_ref12,_excluded3$1);return"BOLD"===decoration.type?_extends({},decoration,{type:!fontWeightValue||fontWeightValue>=700?"BOLD":"NOT_BOLD"}):decoration},convertItalic=function(_ref13){var italicData=_ref13.italicData,decoration=_objectWithoutPropertiesLoose(_ref13,_excluded4$1),isItalicDataUndefined=void 0===italicData;return"ITALIC"===decoration.type?_extends({},decoration,{type:isItalicDataUndefined||italicData?"ITALIC":"NOT_ITALIC"}):decoration},convertUnderline=function(_ref14){var underlineData=_ref14.underlineData,decoration=_objectWithoutPropertiesLoose(_ref14,_excluded5$1),isUnerlineDataUndefined=void 0===underlineData;return"UNDERLINE"===decoration.type?_extends({},decoration,{type:isUnerlineDataUndefined||underlineData?"UNDERLINE":"NOT_UNDERLINE"}):decoration},decorationComparator=function(a,b){return"start"in a&&"start"in b?a.start-b.start:a[0].start-b[0].start};function fromPredicate$1(F){return function(predicate,onFalse){return function(a){return F.fromEither(predicate(a)?right$1(a):left$1(onFalse(a)))}}}var separated=function(left,right){return{left:left,right:right}};function wiltDefault(T,C){return function(F){var traverseF=T.traverse(F);return function(wa,f){return F.map(traverseF(wa,f),C.separate)}}}function witherDefault(T,C){return function(F){var traverseF=T.traverse(F);return function(wa,f){return F.map(traverseF(wa,f),C.compact)}}}var left=left$1,right=right$1,chain=function(f){return function(ma){return isLeft(ma)?ma:f(ma.right)}},fromPredicate=fromPredicate$1({URI:"Either",fromEither:identity}),isLeft=isLeft$1,fold=function(onLeft,onRight){return function(ma){return isLeft(ma)?onLeft(ma.left):onRight(ma.right)}},tryCatch=function(f,onThrow){try{return right(f())}catch(e){return left(onThrow(e))}},map$1=function(f){return function(fa){return fa.map((function(a){return f(a)}))}},firstRight=function(candidate,defaultT,resolvers){var S,firstRightSemi=(S=first(),{concat:function(x,y){return isLeft(y)?x:isLeft(x)?y:right(S.concat(x.right,y.right))}});return pipe$1(concatAll$1(firstRightSemi)(left(defaultT))(pipe$1(resolvers,map$1((function(r){return pipe$1(candidate,fromPredicate(r[0],(function(){return defaultT})),(f=r[1],function(fa){return isLeft(fa)?fa:right(f(fa.right))}));var f})))),fold(identity,identity))},keyToId=function(v){return void 0!==(null==v?void 0:v.key)?_extends({id:v.key},v):v},bulletToBulleted=function(v){return"BULLET_LIST"===v?"BULLETED_LIST":v},appEmbedIdToItemId=function(v){return null!=v&&v.id&&null!=v&&v.imageSrc?_extends({},v,{itemId:v.id}):v},pollIdToOptionId=function(v){return null!=v&&v.id&&null!=v&&v.latestVoters?_extends({},v,{optionId:v.id}):v},idToPollId=function(v){return null!=v&&v.id&&null!=v&&v.options?_extends({},v,{pollId:v.id}):v},preprocess=flow(function(replacer,space){return void 0===space&&(space=2),function(a){return tryCatch((function(){var s=JSON.stringify(a,replacer,space);if("string"!=typeof s)throw new Error("Converting unsupported structure to JSON");return s}),identity)}}((function(_,v){return pipe$1(v,keyToId,bulletToBulleted,appEmbedIdToItemId,pollIdToOptionId,idToPollId)})),chain((function(s){return tryCatch((function(){return JSON.parse(s)}),identity)})),fold((function(){return{}}),(function(res){return res}))),_excluded$1=["depth"],toDraft=flow(preprocess,(function(ricosContent){var _ricosContent$metadat,nodes=ricosContent.nodes,documentStyle=ricosContent.documentStyle,draftContent={blocks:[],entityMap:{}},latestEntityKey=-1,usedKeys={},parseAtomicNode=function(node){var entityMap=createAtomicEntityData(node,latestEntityKey+=1);addBlock({key:node.id,type:BlockType.Atomic,text:" ",entityRanges:[{offset:0,length:1,key:latestEntityKey}]}),draftContent.entityMap=_extends({},draftContent.entityMap,entityMap)},parseListNode=function parseListNode(node,indentation){void 0===indentation&&(indentation=0),node.nodes.forEach((function(listItem){var _listItem$nodes=listItem.nodes,paragraph=_listItem$nodes[0],childNode=_listItem$nodes[1];parseTextNodes(paragraph,{type:TO_DRAFT_LIST_TYPE[node.type],key:listItem.id,indentation:indentation}),childNode&&parseListNode(childNode,indentation+1)}))},parseTextNodes=function(node,_ref){var type=_ref.type,key=_ref.key,indentation=_ref.indentation,_mergeTextNodes=function(nodes){var length=0;return nodes.reduce((function(_ref,currNode){var text=_ref.text,decorationMap=_ref.decorationMap,accText=text;if(currNode.textData){var _currNode$textData=currNode.textData,currText=_currNode$textData.text,currDecorations=_currNode$textData.decorations,textLength=Array.from(currText).length;accText+=currText,currDecorations&&convertDecorationTypes(currDecorations).forEach((function(decoration){decorationMap[decoration.type]||(decorationMap[decoration.type]=[]),decorationMap[decoration.type]=[].concat(decorationMap[decoration.type],[_extends({},decoration,{start:length,end:length+textLength})])})),length+=textLength}return{text:accText,decorationMap:decorationMap}}),{text:"",decorationMap:{}})}(node.nodes),text=_mergeTextNodes.text,_parseDecorations=function(decorationMap,text){var decorations=Object.values(decorationMap).sort(decorationComparator).reduce((function(decorations,currentDecorations){if(currentDecorations.length>0){var mergedDecorations=[currentDecorations.shift()];return currentDecorations.forEach((function(decoration){var lastDecoration=mergedDecorations.pop();decoration.start===lastDecoration.end?mergedDecorations.push(_extends({},lastDecoration,{end:decoration.end})):mergedDecorations.push(lastDecoration,decoration)})),[].concat(decorations,mergedDecorations.sort(decorationComparator))}return decorations}),[]),allDecorations=[].concat(decorations,createEmojiDecorations(text)),entityDecorations=allDecorations.filter((function(_ref2){var type=_ref2.type;return!isInlineStyleDecoration(type)})).sort(decorationComparator);return{inlineStyleDecorations:allDecorations.filter((function(_ref3){var type=_ref3.type;return isInlineStyleDecoration(type)})),entityDecorations:entityDecorations}}(_mergeTextNodes.decorationMap,text),inlineStyleDecorations=_parseDecorations.inlineStyleDecorations,entityDecorations=_parseDecorations.entityDecorations,inlineStyleRanges=inlineStyleDecorations.reduce((function(inlineStyleRanges,decoration){return[].concat(inlineStyleRanges,[{style:decoration.type,offset:decoration.start,length:decoration.end-decoration.start}])}),[]),_parseEntityDecoratio=parseEntityDecorations(entityDecorations,latestEntityKey),entityRanges=_parseEntityDecoratio.entityRanges,entityMap=_parseEntityDecoratio.entityMap,newLatestEntityKey=_parseEntityDecoratio.latestEntityKey;latestEntityKey=newLatestEntityKey;var _createTextBlockData=createTextBlockData(node),depth=_createTextBlockData.depth,data=_objectWithoutPropertiesLoose(_createTextBlockData,_excluded$1);addBlock({key:key,type:type,text:text,depth:indentation||depth,inlineStyleRanges:inlineStyleRanges,entityRanges:entityRanges,data:data}),draftContent.entityMap=_extends({},draftContent.entityMap,entityMap)},addBlock=function(blockProps){var newBlock=merge({key:generateId(),type:BlockType.Unstyled,text:"",depth:0,inlineStyleRanges:[],entityRanges:[],data:{}},blockProps);if(usedKeys[newBlock.key]&&""!==newBlock.key)throw Error('ERROR! Duplicate block key "'+newBlock.key+'"!');usedKeys[newBlock.key]=!0,draftContent.blocks=[].concat(draftContent.blocks,[newBlock])};return function parseNodes(index){void 0===index&&(index=0);var node=nodes[index];if(node){switch(node.type){case"BLOCKQUOTE":parseTextNodes(function(node){if("PARAGRAPH"===node.nodes[0].type)return node.nodes[0];throw Error("Expected a paragraph node but found "+node.nodes[0].type)}(node),{type:BlockType.Blockquote,key:node.id});break;case"CODE_BLOCK":parseTextNodes(node,{type:BlockType.CodeBlock,key:node.id});break;case"HEADING":if(!node.headingData)throw Error("ERROR! Heading node with no data!");parseTextNodes(node,{type:HeaderLevel[node.headingData.level],key:node.id});break;case"ORDERED_LIST":case"BULLETED_LIST":parseListNode(node);break;case"PARAGRAPH":parseTextNodes(node,{type:BlockType.Unstyled,key:node.id});break;default:if(!RICOS_NODE_TYPE_TO_DATA_FIELD[node.type])throw Error('ERROR! Unknown node type "'+node.type+'"!');parseAtomicNode(node)}parseNodes(index+1)}}(),documentStyle&&(draftContent.documentStyle=function(documentStyle){var draftDocStyle={};return Object.entries(documentStyle).forEach((function(_ref2){var header=_ref2[0],decorations=_ref2[1].decorations;draftDocStyle[header]=function(decorations){var draftBlockStyles={};return decorations.forEach((function(decoration){draftBlockStyles=_extends({},draftBlockStyles,ricosDecorationToCss[decoration.type](decoration))})),draftBlockStyles}(decorations)})),draftDocStyle}(documentStyle)),draftContent.VERSION=Version.currentVersion,draftContent.ID=(null===(_ricosContent$metadat=ricosContent.metadata)||void 0===_ricosContent$metadat?void 0:_ricosContent$metadat.id)||v4(),draftContent})),isEmpty=function(r){for(var k in r)if(has.call(r,k))return!1;return!0},keys_$1=function(O){return function(r){return Object.keys(r).sort(O.compare)}},empty={};function mapWithIndex(f){return function(r){var out={};for(var k in r)has.call(r,k)&&(out[k]=f(k,r[k]));return out}}function reduceWithIndex(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(2===args.length)return reduceWithIndex(Ord).apply(void 0,args);var keysO=keys_$1(args[0]);return function(b,f){return function(fa){for(var out=b,ks=keysO(fa),len=ks.length,i=0;i<len;i++){var k=ks[i];out=f(k,out,fa[k])}return out}}}function foldMapWithIndex(O){if("compare"in O){var keysO_1=keys_$1(O);return function(M){return function(f){return function(fa){for(var out=M.empty,ks=keysO_1(fa),len=ks.length,i=0;i<len;i++){var k=ks[i];out=M.concat(out,f(k,fa[k]))}return out}}}}return foldMapWithIndex(Ord)(O)}function reduceRightWithIndex(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(2===args.length)return reduceRightWithIndex(Ord).apply(void 0,args);var keysO=keys_$1(args[0]);return function(b,f){return function(fa){for(var out=b,ks=keysO(fa),i=ks.length-1;i>=0;i--){var k=ks[i];out=f(k,fa[k],out)}return out}}}function sequence$1(F){return _sequence(Ord)(F)}var _map$1=function(fa,f){return pipe$1(fa,function(f){return mapWithIndex((function(_,a){return f(a)}))}(f))},_reduce$1=function(O){var reduceO=reduce(O);return function(fa,b,f){return pipe$1(fa,reduceO(b,f))}},_foldMap$1=function(O){return function(M){var foldMapM=foldMap(O)(M);return function(fa,f){return pipe$1(fa,foldMapM(f))}}},_reduceRight$1=function(O){var reduceRightO=reduceRight(O);return function(fa,b,f){return pipe$1(fa,reduceRightO(b,f))}},_reduceWithIndex$1=function(O){var reduceWithIndexO=reduceWithIndex(O);return function(fa,b,f){return pipe$1(fa,reduceWithIndexO(b,f))}},_foldMapWithIndex$1=function(O){var foldMapWithIndexO=foldMapWithIndex(O);return function(M){var foldMapWithIndexM=foldMapWithIndexO(M);return function(fa,f){return pipe$1(fa,foldMapWithIndexM(f))}}},_reduceRightWithIndex$1=function(O){var reduceRightWithIndexO=reduceRightWithIndex(O);return function(fa,b,f){return pipe$1(fa,reduceRightWithIndexO(b,f))}},_traverse$1=function(O){var traverseWithIndexO=_traverseWithIndex$1(O);return function(F){var traverseWithIndexOF=traverseWithIndexO(F);return function(ta,f){return traverseWithIndexOF(ta,flow(SK,f))}}},_sequence=function(O){var traverseO=_traverse$1(O);return function(F){var traverseOF=traverseO(F);return function(ta){return traverseOF(ta,identity)}}},_traverseWithIndex$1=function(O){return function(F){var keysO=keys_$1(O);return function(ta,f){var ks=keysO(ta);if(0===ks.length)return F.of(empty);for(var fr=F.of({}),_loop_1=function(key){fr=F.ap(F.map(fr,(function(r){return function(b){return r[key]=b,r}})),f(key,ta[key]))},_i=0,ks_1=ks;_i<ks_1.length;_i++){_loop_1(ks_1[_i])}return fr}}};function reduce(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(1===args.length){var reduceWithIndexO_1=reduceWithIndex(args[0]);return function(b,f){return reduceWithIndexO_1(b,(function(_,b,a){return f(b,a)}))}}return reduce(Ord).apply(void 0,args)}function foldMap(O){if("compare"in O){var foldMapWithIndexO_1=foldMapWithIndex(O);return function(M){var foldMapWithIndexM=foldMapWithIndexO_1(M);return function(f){return foldMapWithIndexM((function(_,a){return f(a)}))}}}return foldMap(Ord)(O)}function reduceRight(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];if(1===args.length){var reduceRightWithIndexO_1=reduceRightWithIndex(args[0]);return function(b,f){return reduceRightWithIndexO_1(b,(function(_,b,a){return f(b,a)}))}}return reduceRight(Ord).apply(void 0,args)}var compact$1=function(r){var out={};for(var k in r)if(has.call(r,k)){var oa=r[k];isSome(oa)&&(out[k]=oa.value)}return out},separate$1=function(r){var left={},right={};for(var k in r)if(has.call(r,k)){var e=r[k];isLeft$1(e)?left[k]=e.left:right[k]=e.right}return separated(left,right)},URI$1="ReadonlyRecord";var Compactable$1={URI:URI$1,compact:compact$1,separate:separate$1};_reduce$1(Ord),_foldMap$1(Ord),_reduceRight$1(Ord),_reduce$1(Ord),_foldMap$1(Ord),_reduceRight$1(Ord),_reduceWithIndex$1(Ord),_foldMapWithIndex$1(Ord),_reduceRightWithIndex$1(Ord);var Traversable$1={URI:URI$1,map:_map$1,reduce:_reduce$1(Ord),foldMap:_foldMap$1(Ord),reduceRight:_reduceRight$1(Ord),traverse:_traverse$1(Ord),sequence:sequence$1};_reduce$1(Ord),_foldMap$1(Ord),_reduceRight$1(Ord),_reduceWithIndex$1(Ord),_foldMapWithIndex$1(Ord),_reduceRightWithIndex$1(Ord),_traverse$1(Ord),_traverseWithIndex$1(Ord);witherDefault(Traversable$1,Compactable$1),wiltDefault(Traversable$1,Compactable$1);_reduce$1(Ord),_foldMap$1(Ord),_reduceRight$1(Ord),_traverse$1(Ord),_reduce$1(Ord),_foldMap$1(Ord),_reduceRight$1(Ord),_traverse$1(Ord),_reduceWithIndex$1(Ord),_foldMapWithIndex$1(Ord),_reduceRightWithIndex$1(Ord),_traverseWithIndex$1(Ord);function sequence(F){return sequence$1(F)}var _map=_map$1,_reduce=_reduce$1,_foldMap=_foldMap$1,_reduceRight=_reduceRight$1,_reduceWithIndex=_reduceWithIndex$1,_foldMapWithIndex=_foldMapWithIndex$1,_reduceRightWithIndex=_reduceRightWithIndex$1,_traverse=_traverse$1,_traverseWithIndex=function(O){return function(F){var keysO=function(O){return function(r){return Object.keys(r).sort(O.compare)}}(O);return function(ta,f){var ks=keysO(ta);if(0===ks.length)return F.of({});for(var fr=F.of({}),_loop_1=function(key){fr=F.ap(F.map(fr,(function(r){return function(b){return r[key]=b,r}})),f(key,ta[key]))},_i=0,ks_1=ks;_i<ks_1.length;_i++){_loop_1(ks_1[_i])}return fr}}},compact=compact$1,separate=separate$1,URI="Record",getMonoid=function(S){return{concat:function(first,second){if(isEmpty(first))return second;if(isEmpty(second))return first;var r=Object.assign({},first);for(var k in second)has.call(second,k)&&(r[k]=has.call(first,k)?S.concat(first[k],second[k]):second[k]);return r},empty:empty}},Compactable={URI:URI,compact:compact,separate:separate};_reduce(Ord),_foldMap(Ord),_reduceRight(Ord),_reduce(Ord),_foldMap(Ord),_reduceRight(Ord),_reduceWithIndex(Ord),_foldMapWithIndex(Ord),_reduceRightWithIndex(Ord);var Traversable={URI:URI,map:_map,reduce:_reduce(Ord),foldMap:_foldMap(Ord),reduceRight:_reduceRight(Ord),traverse:_traverse(Ord),sequence:sequence};_reduce(Ord),_foldMap(Ord),_reduceRight(Ord),_reduceWithIndex(Ord),_foldMapWithIndex(Ord),_reduceRightWithIndex(Ord),_traverse(Ord),_traverseWithIndex(Ord);witherDefault(Traversable,Compactable),wiltDefault(Traversable,Compactable);_reduce(Ord),_foldMap(Ord),_reduceRight(Ord),_traverse(Ord),_reduce(Ord),_foldMap(Ord),_reduceRight(Ord),_traverse(Ord),_reduceWithIndex(Ord),_foldMapWithIndex(Ord),_reduceRightWithIndex(Ord),_traverseWithIndex(Ord);var GalleryLayout,fst=function(ea){return ea[0]},snd=function(ea){return ea[1]},isBoolValue=function(val){return"boolean"==typeof val.boolValue},isStringValue=function(val){return"string"==typeof val.stringValue},isNumberValue=function(val){return"number"==typeof val.numberValue},isArrayValue=function(val){var _val$listValue;return isObject(val.listValue)&&Array.isArray(null===(_val$listValue=val.listValue)||void 0===_val$listValue?void 0:_val$listValue.values)},isStructValue=function(val){var _val$structValue;return isObject(val.structValue)&&isObject(null===(_val$structValue=val.structValue)||void 0===_val$structValue?void 0:_val$structValue.fields)},isNullValue=function(val){return"NULL_VALUE"===val.nullValue},mergeJsonMap=getMonoid(first()),toRecord=function(_ref){var _ref2,k=_ref[0],v=_ref[1];return(_ref2={})[k]=v,_ref2},convertStructToJson=function(message){return pipe$1(message.fields,Object.entries,map$1((f=convertValueToJson,g=identity,function(fa){return[g(fst(fa)),f(snd(fa))]})),map$1(toRecord),concatAll$1(M=mergeJsonMap)(M.empty));var M,f,g},convertValueToJson=function(message){return firstRight(message,null,[[isBoolValue,function(_ref3){return _ref3.boolValue}],[isNumberValue,function(_ref4){return _ref4.numberValue}],[isStringValue,function(_ref5){return _ref5.stringValue}],[isNullValue,function(){return null}],[isArrayValue,function(m){return convertListToJson(m.listValue||{values:[]})}],[isStructValue,function(m){return convertStructToJson(m.structValue||{fields:{}})}]])},convertListToJson=function(message){return pipe$1(message.values,map$1(convertValueToJson))},_excluded=["image"],_excluded2=["VERSION","ID"],_excluded3=["VERSION","ID"],_excluded4=["alignment"],_excluded5=["VERSION","ID"],convertNodeToDraftData=function(node){var type=node.type,draftPluginType=FROM_RICOS_ENTITY_TYPE[type],dataFieldName=TO_RICOS_DATA_FIELD[draftPluginType];return dataFieldName||console.error("No data field name | Plugin Name: "+draftPluginType),convertNodeDataToDraft(type,node[dataFieldName]||{},node.nodes)},convertDecorationToDraftData=function(decoration){var type=decoration.type,dataFieldName=TO_RICOS_DECORATION_DATA_FIELD[FROM_RICOS_DECORATION_TYPE[type]];return convertDecorationDataToDraft(type,decoration[dataFieldName])},convertNodeDataToDraft=function(nodeType,data,nodes){var _converters;if(!data)return console.error("No data for "+nodeType),{};var newData=cloneDeep(data),converters=((_converters={}).VIDEO=convertVideoData,_converters.DIVIDER=convertDividerData,_converters.FILE=convertFileData,_converters.GIF=convertGIFData,_converters.IMAGE=convertImageData,_converters.POLL=convertPollData,_converters.APP_EMBED=convertAppEmbedData,_converters.LINK_PREVIEW=convertLinkPreviewData,_converters.BUTTON=convertButtonData,_converters.COLLAPSIBLE_LIST=convertCollapsibleListData,_converters.HTML=convertHTMLData,_converters.MAP=convertMapData,_converters.EMBED=convertEmbedData,_converters.GALLERY=convertGalleryData,_converters.TABLE=convertTableData,_converters.EXTERNAL=convertExternalData,_converters);(newData.containerData&&convertContainerData(newData,nodeType),nodeType in converters)&&(0,converters[nodeType])(newData,nodes);return JSON.parse(JSON.stringify(newData))},convertDecorationDataToDraft=function(decorationType,data){var _converters2,converters=((_converters2={}).MENTION=convertMentionData,_converters2.LINK=convertLinkData,_converters2);if(decorationType in converters){var convert=converters[decorationType],newData=cloneDeep(data);return convert(newData),newData}return data},convertContainerData=function(data,nodeType){var _ref=data.containerData||{},width=_ref.width,alignment=_ref.alignment,spoiler=_ref.spoiler,height=_ref.height,_ref$textWrap=_ref.textWrap,textWrap=void 0===_ref$textWrap||_ref$textWrap,_ref2=spoiler||{},_ref2$enabled=_ref2.enabled,enabled=void 0!==_ref2$enabled&&_ref2$enabled,description=_ref2.description,buttonText=_ref2.buttonText;data.config=Object.assign({},data.config,(null==width?void 0:width.size)&&{size:toCamelCase_1(width.size)},(null==width?void 0:width.custom)&&{width:parseInt(width.custom)},(null==height?void 0:height.custom)&&{height:parseInt(height.custom)},alignment&&{alignment:null==alignment?void 0:alignment.toLowerCase()},spoiler&&{spoiler:{enabled:enabled,description:description,buttonContent:buttonText}},{textWrap:textWrap?"wrap":"nowrap"}),"IMAGE"!==nodeType&&"BUTTON"!==nodeType||null==width||!width.custom?"BUTTON"===nodeType?(data.config.size="small",data.config.width="fit-content"):"MAP"===nodeType&&null!=width&&width.custom&&(data.config.size="content"):data.config.size="inline",delete data.containerData},convertVideoData=function(data){var _data$video,videoSrc=null===(_data$video=data.video)||void 0===_data$video?void 0:_data$video.src,_ref3=data.thumbnail||{},src=_ref3.src,width=_ref3.width,height=_ref3.height;null!=videoSrc&&videoSrc.url?(data.src=videoSrc.url,data.metadata={thumbnail_url:null==src?void 0:src.url,width:width,height:height,title:data.title}):(null!=videoSrc&&videoSrc.id||null!=videoSrc&&videoSrc.custom)&&(data.src={pathname:(null==videoSrc?void 0:videoSrc.id)||(null==videoSrc?void 0:videoSrc.custom),thumbnail:{pathname:(null==src?void 0:src.id)||(null==src?void 0:src.custom),width:width,height:height}}),delete data.video,delete data.title,delete data.thumbnail},convertExternalData=function(data){var draftData=convertStructToJson(data);Object.entries(draftData).forEach((function(_ref4){var k=_ref4[0],v=_ref4[1];data[k]=v})),delete data.fields},convertDividerData=function(data){var _data$lineStyle,_data$width,_data$alignment;(data.type=null===(_data$lineStyle=data.lineStyle)||void 0===_data$lineStyle?void 0:_data$lineStyle.toLowerCase(),delete data.lineStyle,data.config=data.config||{},has$1(data,"width"))&&(data.config.size=null===(_data$width=data.width)||void 0===_data$width?void 0:_data$width.toLowerCase(),delete data.width);has$1(data,"alignment")&&(data.config.alignment=null===(_data$alignment=data.alignment)||void 0===_data$alignment?void 0:_data$alignment.toLowerCase(),delete data.alignment);delete data.containerData};!function(GalleryLayout){GalleryLayout[GalleryLayout.COLLAGE=0]="COLLAGE",GalleryLayout[GalleryLayout.MASONRY=1]="MASONRY",GalleryLayout[GalleryLayout.GRID=2]="GRID",GalleryLayout[GalleryLayout.THUMBNAIL=3]="THUMBNAIL",GalleryLayout[GalleryLayout.SLIDER=4]="SLIDER",GalleryLayout[GalleryLayout.SLIDESHOW=5]="SLIDESHOW",GalleryLayout[GalleryLayout.PANORAMA=6]="PANORAMA",GalleryLayout[GalleryLayout.COLUMN=7]="COLUMN",GalleryLayout[GalleryLayout.MAGIC=8]="MAGIC",GalleryLayout[GalleryLayout.FULLSIZE=9]="FULLSIZE"}(GalleryLayout||(GalleryLayout={}));var convertGalleryData=function(data){var options,styles;has$1(data,"items")&&(data.items=data.items.map((function(item){return function(item){var type=has$1(item,"image")?"image":"video",_item$type$media=item[type].media,url=_item$type$media.src.url,height=_item$type$media.height,width=_item$type$media.width;if(item.url=url,item.metadata={height:height,width:width,type:type},has$1(item,"title")&&(item.metadata.title=item.title),has$1(item,"altText")&&(item.metadata.altText=item.altText),has$1(item,"video.thumbnail")){var _item$video$thumbnail=item.video.thumbnail,_url=_item$video$thumbnail.src.url,_height=_item$video$thumbnail.height,_width=_item$video$thumbnail.width;item.metadata.poster={url:_url,height:_height,width:_width}}return has$1(item,"image.link")&&(item.metadata.link=item.image.link),delete item.video,delete item.image,delete item.title,delete item.altText,item}(item)}))),has$1(data,"options")&&(data.styles=(options=data.options,styles={},has$1(options,"layout.type")&&(styles.galleryLayout=parseInt(GalleryLayout[options.layout.type])),has$1(options,"layout.horizontalScroll")&&(styles.oneRow=options.layout.horizontalScroll),has$1(options,"layout.orientation")&&(styles.isVertical="COLUMNS"===options.layout.orientation),has$1(options,"layout.numberOfColumns")&&(styles.numberOfImagesPerRow=options.layout.numberOfColumns),has$1(options,"item.targetSize")&&(styles.gallerySizePx=options.item.targetSize),has$1(options,"item.ratio")&&(styles.cubeRatio=options.item.ratio),has$1(options,"item.crop")&&(styles.cubeType=options.item.crop.toLowerCase()),has$1(options,"item.spacing")&&(styles.imageMargin=options.item.spacing),has$1(options,"thumbnails.placement")&&(styles.galleryThumbnailsAlignment=options.thumbnails.placement.toLowerCase()),has$1(options,"thumbnails.spacing")&&(styles.thumbnailSpacings=options.thumbnails.spacing/2),styles)),delete data.options},convertImageData=function(data){var _links$link,link=data.link,config=data.config,image=data.image,altText=data.altText,caption=data.caption,_ref5=image||{},src=_ref5.src,width=_ref5.width,height=_ref5.height,id=(null==src?void 0:src.id)||(null==src?void 0:src.custom);data.src=id?{id:id,file_name:id,width:width,height:height}:{url:null==src?void 0:src.url,source:"static"};var links=null!=link&&link.anchor?{anchor:null==link?void 0:link.anchor}:{link:link&&parseLink(link)};if(null!==(_links$link=links.link)&&void 0!==_links$link&&_links$link.customData){var _links$link2,parsedCustomData=parseLinkCustomData(null===(_links$link2=links.link)||void 0===_links$link2?void 0:_links$link2.customData);merge(links.link,parsedCustomData),parsedCustomData.customData||delete links.link.customData}data.config=_extends({},config||{},links),data.metadata=(altText||caption)&&{caption:caption,alt:altText},delete data.image,delete data.link,delete data.caption,delete data.altText},convertGIFData=function(data){var _data$original=data.original,original=void 0===_data$original?{}:_data$original,_data$downsized=data.downsized,downsized=void 0===_data$downsized?{}:_data$downsized,height=data.height,width=data.width;data.gif={originalUrl:original.gif,originalMp4:original.mp4,stillUrl:original.still,downsizedUrl:downsized.gif,downsizedSmallMp4:downsized.mp4,downsizedStillUrl:downsized.still,height:height,width:width},delete data.original,delete data.downsized,delete data.height,delete data.width},convertPollData=function(data){if(has$1(data,"layout.poll.type")&&(data.layout.poll.type=data.layout.poll.type.toLowerCase()),has$1(data,"layout.poll.direction")&&(data.layout.poll.direction=data.layout.poll.direction.toLowerCase()),has$1(data,"layout.options")&&(data.layout.option=data.layout.options,delete data.layout.options),has$1(data,"design")){var _background$type,_data$design=data.design,_data$design$poll=_data$design.poll,poll=void 0===_data$design$poll?{}:_data$design$poll,_data$design$options=_data$design.options,options=void 0===_data$design$options?{}:_data$design$options,background=poll.background,borderRadius=poll.borderRadius;data.design={poll:{backgroundType:null==background||null===(_background$type=background.type)||void 0===_background$type?void 0:_background$type.toLowerCase(),background:function(background){var _background$gradient,_background$gradient2,_background$gradient3,_background$color,_background$color$cha,_background$image,_background$image$src;return null!=background&&background.gradient?{angle:null==background||null===(_background$gradient=background.gradient)||void 0===_background$gradient?void 0:_background$gradient.angle,start:null==background||null===(_background$gradient2=background.gradient)||void 0===_background$gradient2?void 0:_background$gradient2.startColor,end:null==background||null===(_background$gradient3=background.gradient)||void 0===_background$gradient3?void 0:_background$gradient3.lastColor}:"#"===(null==background||null===(_background$color=background.color)||void 0===_background$color||null===(_background$color$cha=_background$color.charAt)||void 0===_background$color$cha?void 0:_background$color$cha.call(_background$color,0))?null==background?void 0:background.color:null==background||null===(_background$image=background.image)||void 0===_background$image||null===(_background$image$src=_background$image.src)||void 0===_background$image$src?void 0:_background$image$src.url}(background),borderRadius:borderRadius+"px"},option:{borderRadius:options.borderRadius+"px"}}}if(has$1(data,"poll.pollId")&&(data.poll.id=data.poll.pollId),delete data.poll.pollId,has$1(data,"poll.creatorId")&&(data.poll.createdBy=data.poll.creatorId),delete data.poll.creatorId,has$1(data,"poll.image.src.url")&&(data.poll.mediaId=data.poll.image.src.url),delete data.poll.image,has$1(data,"poll.options")&&(data.poll.options=data.poll.options.map((function(_ref6){var _image$src,image=_ref6.image,rest=_objectWithoutPropertiesLoose(_ref6,_excluded);return _extends({mediaId:null==image||null===(_image$src=image.src)||void 0===_image$src?void 0:_image$src.url},rest)}))),has$1(data,"poll.settings")){var _data$poll$settings=data.poll.settings,showVotesCount=_data$poll$settings.showVotesCount,showVoters=_data$poll$settings.showVoters,_ref7=_data$poll$settings.permissions||{},view=_ref7.view,vote=_ref7.vote,allowMultipleVotes=_ref7.allowMultipleVotes;data.poll.settings={resultsVisibility:function(view){return"EVERYONE"===view?"ALWAYS":"VOTERS"===view?"VOTERS_ONLY":"ONLY_ME"}(view),multipleVotes:allowMultipleVotes,voteRole:vote,votersDisplay:showVoters,votesDisplay:showVotesCount}}data.config.size="large",data.config.width="full-width"},convertAppEmbedData=function(data){var type=data.type,itemId=data.itemId,name=data.name,imageSrc=data.imageSrc,url=data.url,bookingData=data.bookingData,eventData=data.eventData;data.type=type.toLowerCase();var selectedProduct=_extends({id:itemId,name:name,imageSrc:imageSrc,pageUrl:url},bookingData||{},eventData||{});data.selectedProduct=selectedProduct,delete data.id,delete data.itemId,delete data.name,delete data.imageSrc,delete data.url,bookingData&&delete data.bookingData,eventData&&delete data.eventData},convertLinkPreviewData=function(data){data.thumbnailUrl&&(data.thumbnail_url=data.thumbnailUrl,delete data.thumbnailUrl),data.link&&(data.config.link=parseLink(data.link),delete data.link)},convertMentionData=function(data){data.mention={slug:data.slug,name:data.name},delete data.name,delete data.slug},convertFileData=function(data){var _ref8=data.src||{},url=_ref8.url,id=_ref8.id,custom=_ref8.custom,isPrivate=_ref8.private;data.url=url,data.id=id||custom,function(target,isPrivate){var privacy=void 0!==isPrivate?isPrivate?"private":"public":void 0;target.privacy=privacy}(data,isPrivate),delete data.src},convertCollapsibleListData=function(data,nodes){var _ref9=data||{},initialExpandedItems=_ref9.initialExpandedItems,expandOnlyOne=_ref9.expandOnlyOne,direction=_ref9.direction,config={expandState:function(initialExpandedItems){return"ALL"===initialExpandedItems?"expanded":"NONE"===initialExpandedItems?"collapsed":"first_expanded"}(initialExpandedItems),expandOnlyOne:expandOnlyOne,direction:null==direction?void 0:direction.toLowerCase()};data.config=_extends({},data.config,config),data.pairs=nodes.map((function(node){var _toDraft=toDraft(node.nodes[0]);_toDraft.VERSION,_toDraft.ID;var title=_objectWithoutPropertiesLoose(_toDraft,_excluded2),_toDraft2=toDraft(node.nodes[1]);_toDraft2.VERSION,_toDraft2.ID;var content=_objectWithoutPropertiesLoose(_toDraft2,_excluded3);return{key:node.id,title:title,content:content}})),delete data.initialExpandedItems,delete data.expandOnlyOne,delete data.direction,delete data.config.alignment},convertButtonData=function(data){var link=data.link,text=data.text,_ref10=data.styles||{},colors=_ref10.colors,_ref11=_ref10.border||{},width=_ref11.width,radius=_ref11.radius,convertedLink=link?parseLink(link):{};data.button={settings:_extends({buttonText:text},convertedLink),design:{borderRadius:radius,borderWidth:width,background:null==colors?void 0:colors.background,color:null==colors?void 0:colors.text,borderColor:null==colors?void 0:colors.border}},delete data.link,delete data.text,delete data.type,delete data.styles},convertHTMLData=function(data){var html=data.html,url=data.url,_data$config=data.config,config=void 0===_data$config?{}:_data$config,srcType=html?"html":"url";data.srcType=srcType,data.src=html||url,delete data[srcType],config.size&&delete data.config.size},convertMapData=function(data){var _data$mapSettings=data.mapSettings,draggable=_data$mapSettings.draggable,marker=_data$mapSettings.marker,streetViewControl=_data$mapSettings.streetViewControl,zoomControl=_data$mapSettings.zoomControl,locationName=_data$mapSettings.locationName,viewModeControl=_data$mapSettings.viewModeControl,initialZoom=_data$mapSettings.initialZoom,mapType=_data$mapSettings.mapType;data.mapSettings.isDraggingAllowed=draggable,data.mapSettings.isMarkerShown=marker,data.mapSettings.isStreetViewControlShown=streetViewControl,data.mapSettings.isZoomControlShown=zoomControl,data.mapSettings.locationDisplayName=locationName,data.mapSettings.zoom=initialZoom,data.mapSettings.mode=null==mapType?void 0:mapType.toLowerCase(),delete data.mapSettings.draggable,delete data.mapSettings.marker,delete data.mapSettings.streetViewControl,delete data.mapSettings.zoomControl,delete data.mapSettings.locationName,delete data.mapSettings.initialZoom,delete data.mapSettings.mapType,viewModeControl&&(data.mapSettings.isViewControlShown=viewModeControl,delete data.mapSettings.viewModeControl)},convertEmbedData=function(data){data.config=_extends({},(null==data?void 0:data.config)||{},{alignment:"center",size:"content",link:{url:data.src,target:"_blank",rel:"noopener"}});var _data$oembed=data.oembed,html=_data$oembed.html,thumbnailUrl=_data$oembed.thumbnailUrl,title=_data$oembed.title,description=_data$oembed.description;data.html=html,thumbnailUrl&&(data.thumbnail_url=thumbnailUrl),title&&(data.title=title),description&&(data.description=description),delete data.oembed,delete data.src},convertLinkData=function(data){if(data.link){var _parseLink=parseLink(data.link),url=_parseLink.url,target=_parseLink.target,rel=_parseLink.rel,customData=_parseLink.customData;if(data.url=url,target&&(data.target=target),rel&&(data.rel=rel),customData){var customDataObj=parseLinkCustomData(customData);merge(data,customDataObj)}delete data.link}},parseLinkCustomData=function(customData){try{return{customData:JSON.parse(customData)}}catch(e){return console.error("failed to parse customData",customData),{customData:customData}}},convertTableData=function(data,nodes){var _ref12=data||{},_ref12$dimensions=_ref12.dimensions,colsWidthRatio=_ref12$dimensions.colsWidthRatio,rowsHeight=_ref12$dimensions.rowsHeight,colsMinWidth=_ref12$dimensions.colsMinWidth,header=_ref12.header,_data$config2=data.config;_data$config2.alignment;var rest=_objectWithoutPropertiesLoose(_data$config2,_excluded4);data.config=_extends({},rest,{colsWidth:colsWidthRatio,rowsHeight:rowsHeight,colsMinWidth:colsMinWidth,rowHeader:header});var rows={};nodes.forEach((function(row,i){rows[i]={columns:{}},row.nodes.forEach((function(cell,j){var _cellStyle$verticalAl,_cellStyle$background,_borderColors$top,_borderColors$left,_borderColors$right,_borderColors$bottom,_toDraft3=toDraft(cell);_toDraft3.VERSION,_toDraft3.ID;var content=_objectWithoutPropertiesLoose(_toDraft3,_excluded5),_ref13=cell.tableCellData||{},_ref13$cellStyle=_ref13.cellStyle,cellStyle=void 0===_ref13$cellStyle?{}:_ref13$cellStyle,_ref13$borderColors=_ref13.borderColors,borderColors=void 0===_ref13$borderColors?{}:_ref13$borderColors;rows[i].columns[j]={content:content,style:{verticalAlign:null===(_cellStyle$verticalAl=cellStyle.verticalAlignment)||void 0===_cellStyle$verticalAl?void 0:_cellStyle$verticalAl.toLowerCase(),backgroundColor:null===(_cellStyle$background=cellStyle.backgroundColor)||void 0===_cellStyle$background?void 0:_cellStyle$background.toLowerCase()},border:{top:null===(_borderColors$top=borderColors.top)||void 0===_borderColors$top?void 0:_borderColors$top.toLowerCase(),left:null===(_borderColors$left=borderColors.left)||void 0===_borderColors$left?void 0:_borderColors$left.toLowerCase(),right:null===(_borderColors$right=borderColors.right)||void 0===_borderColors$right?void 0:_borderColors$right.toLowerCase(),bottom:null===(_borderColors$bottom=borderColors.bottom)||void 0===_borderColors$bottom?void 0:_borderColors$bottom.toLowerCase()}}}))})),data.config.rows=rows,delete data.dimensions,delete data.header};export{convertDecorationDataToDraft,convertNodeDataToDraft};
